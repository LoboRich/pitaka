

.flex.items-center.justify-center.h-full
  %button.py-2.px-4.bg-blue-500.text-white.rounded.hover:bg-blue-700{id: "#{info.id}", onclick: "toggleModal(this.id)"} BUY
.fixed.z-10.overflow-y-auto.top-0.w-full.left-0.hidden{id: "buy-#{info.id}"}
  = form_with url: "/markets/#{info.id}/buy", method: :post do |form|
    .flex.items-center.justify-center.min-height-100vh.pt-4.px-4.pb-20.text-center.sm:block.sm:p-0
      .fixed.inset-0.transition-opacity
        .absolute.inset-0.bg-gray-900.opacity-75
      %span.hidden.sm:inline-block.sm:align-middle.sm:h-screen â€‹
      .inline-block.align-center.bg-white.rounded-lg.text-left.overflow-hidden.shadow-xl.transform.transition-all.sm:my-8.sm:align-middle.sm:max-w-lg.sm:w-full{"aria-labelledby" => "modal-headline", "aria-modal" => "true", role: "dialog"}
        .bg-white.px-4.pt-5.pb-4.sm:p-6.sm:pb-4
          %h3.text-center.text-lg.leading-6.font-medium.text-gray-900
            = "#{info.name} - #{info.market_cap / info.supply}"
            .md:flex.md:items-center.mb-6
          %div.flex.flex-row
            %div.flex.flex-col.px-4.py-3
              %div{class: "md:w-1/3"}
                = form.label 'Stocks', class: 'block text-gray-500 font-bold mb-1 md:mb-0 pr-4'
              %div{class: "md:w-3/3"}
                = form.number_field :current_price, value: info.market_cap / info.supply, hidden: true
                = form.number_field :stocks, class: 'bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-purple-500', :oninput=>"calculate_price(this.value)", value: 0
            %div.flex.flex-col.px-4.py-3
              %div{class: "md:w-1/3"}
                = form.label 'Price', class: 'block text-gray-500 font-bold mb-1 md:mb-0 pr-4'
              %div{class: "md:w-3/3"}
                = form.number_field :price, class: 'bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-purple-500', value: 0, readonly:true
        .bg-gray-200.px-4.py-3.text-right
          %button.py-2.px-4.bg-gray-500.text-white.rounded.hover:bg-gray-700.mr-2{id: "#{info.id}", onclick: "toggleModal(this.id)", type: "button"}
            %i.fas.fa-times
            Cancel
          %button.py-2.px-4.bg-blue-500.text-white.rounded.hover:bg-blue-700.mr-2{type: "submit"}
            %i.fas.fa-plus
            Buy

:javascript
  function toggleModal(id) {
    document.getElementById("buy-"+id).classList.toggle('hidden')
  }
  function calculate_price(value) {
    price = value * document.getElementById('current_price').value;
    document.getElementById('price').value = price;
  }